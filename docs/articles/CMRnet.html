<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CMRnet • CMRnet</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="CMRnet">
<meta property="og:description" content="CMRnet">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">CMRnet</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/CMRnet.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="divider">
    <li class="dropdown-header">Information</li>
    <li>
      <a href="../articles/CMRnet_information.html">Detailed information on using CMRnet</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Case studies</li>
    <li>
      <a href="../articles/CaseStudyOne.html">Case Study One: Social behaviour during a badger lifetime</a>
    </li>
    <li>
      <a href="../articles/CaseStudyTwo.html">Case Study Two: Example of a multiplex movement network</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>CMRnet</h1>
                        <h4 class="author">Matthew Silk</h4>
            
            <h4 class="date">2020-07-03</h4>
      
      
      <div class="hidden name"><code>CMRnet.Rmd</code></div>

    </div>

    
    
<div id="an-introduction-on-how-to-use-cmrnet-to-create-analyse-and-plot-networks-from-capture-mark-recapture-data" class="section level4">
<h4 class="hasAnchor">
<a href="#an-introduction-on-how-to-use-cmrnet-to-create-analyse-and-plot-networks-from-capture-mark-recapture-data" class="anchor"></a>An introduction on how to use CMRnet to create, analyse and plot networks from capture, mark, recapture data</h4>
<hr>
<div class="sourceCode" id="cb1"><html><body><pre class="r"><span class="co"># load packages</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">CMRnet</span>)</pre></body></html></div>
<p><strong>CMRnet</strong> comes with three example datasets loaded which help demonstrate how data should be organised when using <strong>CMRnet</strong> and how the functions work. In this vignette we will use these example dataset to demonstrate the functions of <strong>CMRnet</strong>.</p>
<div class="sourceCode" id="cb2"><html><body><pre class="r"><span class="co"># load in data</span>
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="no">cmrData</span>)
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="no">cmrData2</span>)
<span class="fu"><a href="https://rdrr.io/r/utils/data.html">data</a></span>(<span class="no">cmrData3</span>)

<span class="co"># look at the datasets</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">cmrData</span>)
<span class="co">#&gt; 'data.frame':    1230 obs. of  5 variables:</span>
<span class="co">#&gt;  $ id  : num  69 60 24 26 71 43 17 70 10 79 ...</span>
<span class="co">#&gt;  $ loc : chr  "h" "h" "r" "m" ...</span>
<span class="co">#&gt;  $ x   : num  13 13 20 14 15 14 8 18 18 20 ...</span>
<span class="co">#&gt;  $ y   : num  8 8 2 10 17 10 14 8 3 2 ...</span>
<span class="co">#&gt;  $ date: chr  "2010-01-20" "2010-01-20" "2010-01-20" "2010-01-20" ...</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">cmrData2</span>)
<span class="co">#&gt; 'data.frame':    1230 obs. of  6 variables:</span>
<span class="co">#&gt;  $ id   : num  69 60 24 26 71 43 17 70 10 79 ...</span>
<span class="co">#&gt;  $ loc  : chr  "h" "h" "r" "m" ...</span>
<span class="co">#&gt;  $ x    : num  13 13 20 14 15 14 8 18 18 20 ...</span>
<span class="co">#&gt;  $ y    : num  8 8 2 10 17 10 14 8 3 2 ...</span>
<span class="co">#&gt;  $ date : chr  "2010-01-20" "2010-01-20" "2010-01-20" "2010-01-20" ...</span>
<span class="co">#&gt;  $ layer: Factor w/ 2 levels "F","M": 1 2 2 2 1 1 1 2 2 1 ...</span>
<span class="fu"><a href="https://rdrr.io/r/utils/str.html">str</a></span>(<span class="no">cmrData3</span>)
<span class="co">#&gt; 'data.frame':    1191 obs. of  5 variables:</span>
<span class="co">#&gt;  $ id  : int  11 3 18 15 20 23 29 26 3 20 ...</span>
<span class="co">#&gt;  $ loc : Factor w/ 20 levels "a","b","c","d",..: 7 12 14 16 2 6 14 5 16 2 ...</span>
<span class="co">#&gt;  $ x   : int  20 2 7 18 11 12 7 15 18 11 ...</span>
<span class="co">#&gt;  $ y   : int  10 9 5 18 13 8 5 14 18 13 ...</span>
<span class="co">#&gt;  $ date: POSIXct, format: "2020-06-18 02:32:01" "2020-06-18 02:32:01" ...</span></pre></body></html></div>
</div>
<div id="creating-networks-from-mark-recpature-data" class="section level4">
<h4 class="hasAnchor">
<a href="#creating-networks-from-mark-recpature-data" class="anchor"></a>1. Creating networks from mark-recpature data</h4>
<p>A principal aim of the package is to facilitate the construction of networks from mark-recapture data. <strong>CMRnet</strong> can be used to construct two types of social network:</p>
<ol style="list-style-type: decimal">
<li>Co-capture (social) networks. These networks connect two individuals that have been captured at the same location (or close by) within a pre-defined time interval</li>
<li>Movement networks. These networks connect two locations that an individual has been trapped at with a directed edge. <strong>CMRnet</strong> enables movement networks to be constructed as multiplex networks in which different layers represent the movements of different types of individual (female vs. male, different age classes etc.)</li>
</ol>
<p>In both co-capture and movement networks, the package allows the use of either date or date/time information to construct social networks. The former will be applicable to most types of mark-recapture data, but the latter will be useful when capture events occur at much higher resolutions.</p>
<hr>
<p>First we construct co-capture networks using the the normal and high resolution versions of the co-capture network function. The normal version <code><a href="../reference/DynamicNetCreate.html">DynamicNetCreate()</a></code> defines the interval window in days.</p>
<div class="sourceCode" id="cb3"><html><body><pre class="r">
<span class="co"># Set parameters for the function ####</span>

<span class="co"># Start Date</span>
<span class="no">mindate</span> <span class="kw">&lt;-</span> <span class="st">"2010-01-01"</span>
<span class="co"># End Date</span>
<span class="no">maxdate</span> <span class="kw">&lt;-</span> <span class="st">"2015-01-01"</span>
<span class="co"># Length of time in days within which individuals are considered to be co-captured</span>
<span class="no">intwindow</span> <span class="kw">&lt;-</span> <span class="fl">60</span>
<span class="co"># Length of each network window in months. We will use 5 12-month windows in this example</span>
<span class="no">netwindow</span> <span class="kw">&lt;-</span> <span class="fl">12</span>
<span class="co"># Overlap between network windows in months (we have no overlap in this example)</span>
<span class="no">overlap</span> <span class="kw">&lt;-</span> <span class="fl">0</span>
<span class="co"># Spatial tolerance for defining co-captures. Captures within a threshold distance (rather than simply at the same location) are considered when this is set to be greater than zero</span>
<span class="no">spacewindow</span> <span class="kw">&lt;-</span> <span class="fl">0</span>

<span class="co"># Create co-capture (social) networks ####</span>
<span class="co"># index=FALSE indicates that we want edges to be weighted by the number of movements (see help pages for the alternative)</span>
<span class="no">netdat</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/DynamicNetCreate.html">DynamicNetCreate</a></span>(
    <span class="kw">data</span> <span class="kw">=</span> <span class="no">cmrData</span>,
    <span class="kw">intwindow</span> <span class="kw">=</span> <span class="no">intwindow</span>,
    <span class="kw">mindate</span> <span class="kw">=</span> <span class="no">mindate</span>,
    <span class="kw">maxdate</span> <span class="kw">=</span> <span class="no">maxdate</span>,
    <span class="kw">netwindow</span> <span class="kw">=</span> <span class="no">netwindow</span>,
    <span class="kw">overlap</span> <span class="kw">=</span> <span class="no">overlap</span>,
    <span class="kw">spacewindow</span> <span class="kw">=</span> <span class="no">spacewindow</span>,
    <span class="kw">index</span><span class="kw">=</span><span class="fl">FALSE</span>
  )
<span class="co">#&gt; [1] "End of final network window aligns with end of study"</span></pre></body></html></div>
<pre><code>[==================================================================] 100%
[==================================================================] 100%
[==================================================================] 100%
[==================================================================] 100%
[==================================================================] 100%</code></pre>
<p>The high resolution <code>DynamicNetCreateHi</code> sets the interval window in minutes.</p>
<div class="sourceCode" id="cb5"><html><body><pre class="r">
<span class="co"># Set parameters for the function ####</span>
<span class="no">mindate</span> <span class="kw">&lt;-</span> <span class="st">"2019-12-01 00:00:00"</span>
<span class="no">maxdate</span> <span class="kw">&lt;-</span> <span class="st">"2020-07-01 00:00:00"</span>
<span class="co"># The interaction window is now in minutes. We set it to be one day here.</span>
<span class="no">intwindow</span> <span class="kw">&lt;-</span> <span class="fl">24</span>*<span class="fl">60</span>
<span class="co"># The network window is now in days</span>
<span class="no">netwindow</span> <span class="kw">&lt;-</span> <span class="fl">20</span>
<span class="co"># The overlap is now also in days</span>
<span class="no">overlap</span> <span class="kw">&lt;-</span> <span class="fl">2</span>
<span class="no">spacewindow</span> <span class="kw">&lt;-</span> <span class="fl">0</span>

<span class="co">## Create high-resolution co-capture (social) networks</span>
<span class="no">netdat_hi</span><span class="kw">&lt;-</span><span class="fu"><a href="../reference/DynamicNetCreateHi.html">DynamicNetCreateHi</a></span>(
  <span class="kw">data</span><span class="kw">=</span><span class="no">cmrData3</span>,
  <span class="kw">intwindow</span><span class="kw">=</span><span class="no">intwindow</span>,
  <span class="kw">mindate</span><span class="kw">=</span><span class="no">mindate</span>,
  <span class="kw">maxdate</span><span class="kw">=</span><span class="no">maxdate</span>,
  <span class="kw">netwindow</span><span class="kw">=</span><span class="no">netwindow</span>,
  <span class="kw">overlap</span><span class="kw">=</span><span class="no">overlap</span>,
  <span class="kw">spacewindow</span><span class="kw">=</span><span class="no">spacewindow</span>,
  <span class="kw">index</span><span class="kw">=</span><span class="fl">FALSE</span>)
<span class="co">#&gt; [1] "Final network window stops 18720 minutes before the end of the study"</span></pre></body></html></div>
<pre><code>[==================================================================] 100%
[==================================================================] 100%
[==================================================================] 100%
[==================================================================] 100%
[==================================================================] 100%
[==================================================================] 100%
[==================================================================] 100%
[==================================================================] 100%
[==================================================================] 100%
[==================================================================] 100%
[==================================================================] 100%</code></pre>
<hr>
<p>Next we do the same for the creation of single layer movement networks using <code>MoveNetCreate</code> and <code>MoveNetCreateHi</code>.</p>
<div class="sourceCode" id="cb7"><html><body><pre class="r">
<span class="co"># Set parameters for the function ####</span>

<span class="co">#Start Date</span>
<span class="no">mindate</span> <span class="kw">&lt;-</span> <span class="st">"2010-01-01"</span>
<span class="co"># End Date</span>
<span class="no">maxdate</span> <span class="kw">&lt;-</span> <span class="st">"2015-01-01"</span>
<span class="co"># Length of time in days within which individuals are considered to be co-captured</span>
<span class="no">intwindow</span> <span class="kw">&lt;-</span> <span class="fl">60</span>
<span class="co"># Length of each network window in months. We will use 5 12-month windows in this example</span>
<span class="no">netwindow</span> <span class="kw">&lt;-</span> <span class="fl">12</span>
<span class="co"># Overlap between network windows in months (we have no overlap in this example)</span>
<span class="no">overlap</span> <span class="kw">&lt;-</span> <span class="fl">0</span>

<span class="co"># Generate movement network</span>
<span class="co"># nextonly=TRUE indicates that only direct movements between groups should be considered (see help pages)</span>
<span class="no">movenetdat</span> <span class="kw">&lt;-</span> <span class="fu"><a href="../reference/MoveNetCreate.html">MoveNetCreate</a></span>(
  <span class="kw">data</span> <span class="kw">=</span> <span class="no">cmrData</span>,
  <span class="kw">intwindow</span> <span class="kw">=</span> <span class="no">intwindow</span>,
  <span class="kw">mindate</span> <span class="kw">=</span> <span class="no">mindate</span>,
  <span class="kw">maxdate</span> <span class="kw">=</span> <span class="no">maxdate</span>,
  <span class="kw">netwindow</span> <span class="kw">=</span> <span class="no">netwindow</span>,
  <span class="kw">overlap</span> <span class="kw">=</span> <span class="no">overlap</span>,
  <span class="kw">nextonly</span> <span class="kw">=</span> <span class="fl">TRUE</span>,
  <span class="kw">index</span><span class="kw">=</span><span class="fl">FALSE</span>
)
<span class="co">#&gt; [1] "End of final network window aligns with end of study"</span></pre></body></html></div>
<pre><code>[==================================================================] 100%
[==================================================================] 100%
[==================================================================] 100%</code></pre>
<p>Again the high resolution <code>MoveNetCreateHi</code> defines the interval window in minutes.</p>
<div class="sourceCode" id="cb9"><html><body><pre class="r">
<span class="co"># Set parameters for the function ####</span>
<span class="no">mindate</span> <span class="kw">&lt;-</span> <span class="st">"2019-12-01 00:00:00"</span>
<span class="no">maxdate</span> <span class="kw">&lt;-</span> <span class="st">"2020-07-01 00:00:00"</span>
<span class="co"># Interaction window is now in minutes</span>
<span class="no">intwindow</span> <span class="kw">&lt;-</span> <span class="fl">30</span>*<span class="fl">24</span>*<span class="fl">60</span>
<span class="co"># The network window is now in days</span>
<span class="no">netwindow</span> <span class="kw">&lt;-</span> <span class="fl">60</span>
<span class="co">#The overlap is now also in days</span>
<span class="no">overlap</span> <span class="kw">&lt;-</span> <span class="fl">0</span>
<span class="no">spacewindow</span> <span class="kw">&lt;-</span> <span class="fl">0</span>

<span class="co"># Generate movement network</span>
<span class="co"># nextonly=TRUE indicates that only direct movements between groups should be considered (see help pages)</span>
<span class="no">movenetdat_hi</span> <span class="kw">&lt;-</span> <span class="kw pkg">CMRnet</span><span class="kw ns">::</span><span class="fu"><a href="../reference/MoveNetCreateHi.html">MoveNetCreateHi</a></span>(
  <span class="kw">data</span> <span class="kw">=</span> <span class="no">cmrData3</span>,
  <span class="kw">intwindow</span> <span class="kw">=</span> <span class="no">intwindow</span>,
  <span class="kw">mindate</span> <span class="kw">=</span> <span class="no">mindate</span>,
  <span class="kw">maxdate</span> <span class="kw">=</span> <span class="no">maxdate</span>,
  <span class="kw">netwindow</span> <span class="kw">=</span> <span class="no">netwindow</span>,
  <span class="kw">overlap</span> <span class="kw">=</span> <span class="no">overlap</span>,
  <span class="kw">nextonly</span> <span class="kw">=</span> <span class="fl">TRUE</span>,
  <span class="kw">index</span><span class="kw">=</span><span class="fl">FALSE</span>
)
<span class="co">#&gt; [1] "Final network window stops 1567049760 minutes before the end of the study"</span></pre></body></html></div>
<pre><code>[==================================================================] 100%
[==================================================================] 100%
[==================================================================] 100%</code></pre>
<hr>
<p>Next we construct multiplex movement networks using the standard function to show how to use the alternative data format. These networks are useful when there are multiple layered movement networks (i.e. a separate network for males and females).</p>
<div class="sourceCode" id="cb11"><html><body><pre class="r"><span class="co">#Start Date</span>
<span class="no">mindate</span> <span class="kw">&lt;-</span> <span class="st">"2010-01-01"</span>
<span class="co"># End Date</span>
<span class="no">maxdate</span> <span class="kw">&lt;-</span> <span class="st">"2015-01-01"</span>
<span class="co"># Length of time in days within which individuals are considered to be co-captured</span>
<span class="no">intwindow</span> <span class="kw">&lt;-</span> <span class="fl">60</span>
<span class="co"># Length of each network window in months. We will use 5 12-month windows in this example</span>
<span class="no">netwindow</span> <span class="kw">&lt;-</span> <span class="fl">12</span>
<span class="co"># Overlap between network windows in months (we have no overlap in this example)</span>
<span class="no">overlap</span> <span class="kw">&lt;-</span> <span class="fl">0</span>

<span class="co"># Generate multiplex movement network</span>
<span class="no">multimovenetdat</span> <span class="kw">&lt;-</span>
  <span class="kw pkg">CMRnet</span><span class="kw ns">::</span><span class="fu"><a href="../reference/MultiMoveNetCreate.html">MultiMoveNetCreate</a></span>(
    <span class="kw">data</span> <span class="kw">=</span> <span class="no">cmrData2</span>,
    <span class="kw">intwindow</span> <span class="kw">=</span> <span class="no">intwindow</span>,
    <span class="kw">mindate</span> <span class="kw">=</span> <span class="no">mindate</span>,
    <span class="kw">maxdate</span> <span class="kw">=</span> <span class="no">maxdate</span>,
    <span class="kw">netwindow</span> <span class="kw">=</span> <span class="no">netwindow</span>,
    <span class="kw">overlap</span> <span class="kw">=</span> <span class="no">overlap</span>,
    <span class="kw">nextonly</span> <span class="kw">=</span> <span class="fl">TRUE</span>,
    <span class="kw">index</span><span class="kw">=</span><span class="fl">FALSE</span>
  )
<span class="co">#&gt; [1] "End of final network window aligns with end of study"</span></pre></body></html></div>
<hr>
<hr>
<hr>
<p>Above we have demonstrated how to generate networks using CMRnet. Next we demonstrate the package’s functionality for onward analysis and plotting.</p>
<hr>
</div>
<div id="conversion-to-igraph-objects-and-plotting" class="section level4">
<h4 class="hasAnchor">
<a href="#conversion-to-igraph-objects-and-plotting" class="anchor"></a>2. Conversion to igraph objects and plotting</h4>
<p>To faciliate analysis we provide a function that can convert CMRnet objects into lists of igraph objects. This is a commonly-used network analysis package in R that provides various functions to calculate individual and network-level measures of network structure.</p>
<hr>
<p>We also provide functions that can produce plots of these lists of igraph networks to enable basic visualisation of the networks produced.</p>
<hr>
<p>Here is an example where plot a social network.</p>
<div class="sourceCode" id="cb12"><html><body><pre class="r">
<span class="co">##Convert social networks into a list of igraph networks</span>
<span class="no">cc_nets</span><span class="kw">&lt;-</span><span class="kw pkg">CMRnet</span><span class="kw ns">::</span><span class="fu"><a href="../reference/cmr_igraph.html">cmr_igraph</a></span>(<span class="no">netdat_hi</span>,<span class="kw">type</span><span class="kw">=</span><span class="st">"social"</span>)

<span class="co">#Look at the structure of the object generated</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span>(<span class="no">cc_nets</span>)
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; [[1]][[1]]</span>
<span class="co">#&gt; IGRAPH 7cbc8b9 UNW- 31 34 -- </span>
<span class="co">#&gt; + attr: name (v/c), weight (e/n)</span>
<span class="co">#&gt; + edges from 7cbc8b9 (vertex names):</span>
<span class="co">#&gt;  [1] 4 --22 4 --23 5 --42 6 --23 6 --25 6 --30 6 --43 6 --50 9 --28 9 --29</span>
<span class="co">#&gt; [11] 9 --42 10--49 16--19 21--23 22--31 22--40 22--43 22--49 23--25 23--50</span>
<span class="co">#&gt; [21] 25--41 25--50 27--50 28--29 28--42 29--42 30--31 30--32 30--43 31--32</span>
<span class="co">#&gt; [31] 31--43 31--49 43--46 43--49</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[1]][[2]]</span>
<span class="co">#&gt; IGRAPH 7071767 UNW- 48 65 -- </span>
<span class="co">#&gt; + attr: name (v/c), weight (e/n)</span>
<span class="co">#&gt; + edges from 7071767 (vertex names):</span>
<span class="co">#&gt;  [1] 2 --36 3 --4  3 --19 3 --40 4 --22 6 --11 6 --23 6 --25 6 --29 6 --30</span>
<span class="co">#&gt; [11] 6 --38 6 --43 6 --50 7 --10 7 --16 7 --32 9 --13 9 --26 9 --28 9 --42</span>
<span class="co">#&gt; [21] 10--32 10--37 10--49 11--29 11--46 12--17 13--20 13--26 13--44 13--50</span>
<span class="co">#&gt; [31] 14--43 16--19 16--36 17--25 17--32 17--37 18--27 19--24 19--35 20--21</span>
<span class="co">#&gt; [41] 20--22 20--24 20--39 20--44 21--39 22--23 22--24 22--36 22--42 23--25</span>
<span class="co">#&gt; [51] 23--36 23--50 24--35 25--32 25--50 26--38 27--31 27--33 27--50 28--42</span>
<span class="co">#&gt; [61] 30--43 31--33 34--42 37--49 47--50</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[1]][[3]]</span>
<span class="co">#&gt; IGRAPH 98eeb76 UNW- 33 27 -- </span>
<span class="co">#&gt; + attr: name (v/c), weight (e/n)</span>
<span class="co">#&gt; + edges from 98eeb76 (vertex names):</span>
<span class="co">#&gt;  [1] 1 --28 2 --38 2 --40 3 --11 3 --46 6 --22 6 --26 6 --38 8 --27 9 --13</span>
<span class="co">#&gt; [11] 10--34 11--46 12--18 12--34 12--36 13--37 18--34 18--36 22--26 22--34</span>
<span class="co">#&gt; [21] 22--38 24--26 26--38 34--36 35--36 38--40 48--50</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[1]][[4]]</span>
<span class="co">#&gt; IGRAPH 8df6c58 UNW- 43 65 -- </span>
<span class="co">#&gt; + attr: name (v/c), weight (e/n)</span>
<span class="co">#&gt; + edges from 8df6c58 (vertex names):</span>
<span class="co">#&gt;  [1] 1 --6  1 --34 1 --47 1 --49 2 --13 2 --35 3 --11 3 --24 3 --39 3 --46</span>
<span class="co">#&gt; [11] 4 --40 4 --47 5 --29 5 --36 5 --42 5 --44 6 --34 6 --49 8 --20 8 --22</span>
<span class="co">#&gt; [21] 8 --43 9 --31 10--12 10--35 10--45 10--50 11--23 11--24 11--32 11--46</span>
<span class="co">#&gt; [31] 11--49 12--35 12--45 12--50 13--19 13--35 13--47 13--50 14--19 14--25</span>
<span class="co">#&gt; [41] 14--33 15--20 15--47 19--20 19--33 19--35 19--47 19--50 20--39 20--47</span>
<span class="co">#&gt; [51] 22--43 22--49 23--49 26--31 29--42 29--43 29--44 33--47 34--49 35--45</span>
<span class="co">#&gt; [61] 35--50 40--47 42--44 42--48 45--50</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[1]][[5]]</span>
<span class="co">#&gt; IGRAPH 063b686 UNW- 50 150 -- </span>
<span class="co">#&gt; + attr: name (v/c), weight (e/n)</span>
<span class="co">#&gt; + edges from 063b686 (vertex names):</span>
<span class="co">#&gt;  [1] 1 --2  1 --13 1 --43 1 --45 1 --49 2 --11 2 --18 2 --20 2 --27 2 --33</span>
<span class="co">#&gt; [11] 2 --39 2 --40 2 --42 2 --48 3 --11 3 --24 3 --44 4 --25 4 --27 4 --28</span>
<span class="co">#&gt; [21] 4 --33 4 --43 6 --20 7 --16 7 --44 8 --13 8 --20 8 --22 8 --34 8 --43</span>
<span class="co">#&gt; [31] 9 --40 10--20 10--40 10--41 10--50 11--19 11--22 11--24 11--27 11--28</span>
<span class="co">#&gt; [41] 11--32 12--14 12--34 13--14 13--24 13--27 13--29 13--36 13--37 13--39</span>
<span class="co">#&gt; [51] 13--42 13--45 13--47 14--15 14--17 14--27 14--34 14--36 14--37 14--42</span>
<span class="co">#&gt; [61] 15--17 15--21 15--35 15--38 16--30 16--44 17--23 17--27 17--28 17--47</span>
<span class="co">#&gt; [71] 17--48 18--23 18--49 19--20 19--21 19--22 19--24 19--32 19--33 19--35</span>
<span class="co">#&gt; + ... omitted several edges</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[1]][[6]]</span>
<span class="co">#&gt; IGRAPH ff2260d UNW- 49 177 -- </span>
<span class="co">#&gt; + attr: name (v/c), weight (e/n)</span>
<span class="co">#&gt; + edges from ff2260d (vertex names):</span>
<span class="co">#&gt;  [1] 1 --7  1 --14 1 --18 1 --24 1 --28 1 --30 1 --33 1 --35 1 --43 1 --44</span>
<span class="co">#&gt; [11] 1 --45 1 --50 2 --37 2 --41 3 --12 3 --13 3 --15 3 --26 3 --27 3 --32</span>
<span class="co">#&gt; [21] 3 --37 3 --50 4 --6  4 --9  4 --10 4 --31 5 --34 6 --7  6 --10 6 --31</span>
<span class="co">#&gt; [31] 6 --47 7 --35 7 --47 7 --50 8 --29 9 --14 9 --16 9 --18 9 --19 9 --20</span>
<span class="co">#&gt; [41] 9 --33 9 --34 10--19 10--31 10--32 10--34 10--36 11--22 11--35 11--45</span>
<span class="co">#&gt; [51] 11--47 11--48 12--31 12--32 12--33 12--35 12--36 12--45 12--48 13--15</span>
<span class="co">#&gt; [61] 13--18 13--26 13--27 13--37 14--16 14--20 14--30 14--33 14--35 14--47</span>
<span class="co">#&gt; [71] 15--20 15--26 15--27 15--37 15--47 16--20 16--33 16--39 16--43 16--47</span>
<span class="co">#&gt; + ... omitted several edges</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[1]][[7]]</span>
<span class="co">#&gt; IGRAPH dd0390a UNW- 43 52 -- </span>
<span class="co">#&gt; + attr: name (v/c), weight (e/n)</span>
<span class="co">#&gt; + edges from dd0390a (vertex names):</span>
<span class="co">#&gt;  [1] 1 --11 1 --21 2 --20 3 --5  3 --36 3 --41 4 --31 4 --46 5 --36 5 --41</span>
<span class="co">#&gt; [11] 6 --32 8 --47 9 --35 11--19 11--21 11--26 11--29 11--48 12--17 12--23</span>
<span class="co">#&gt; [21] 12--48 16--19 16--20 17--23 18--32 18--40 19--20 19--26 19--29 19--48</span>
<span class="co">#&gt; [31] 20--26 20--41 24--32 24--50 26--29 26--30 26--37 26--41 26--44 26--48</span>
<span class="co">#&gt; [41] 27--40 27--49 29--48 30--37 30--44 31--46 32--33 32--50 36--41 37--44</span>
<span class="co">#&gt; [51] 40--49 41--48</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[1]][[8]]</span>
<span class="co">#&gt; IGRAPH 7501671 UNW- 49 162 -- </span>
<span class="co">#&gt; + attr: name (v/c), weight (e/n)</span>
<span class="co">#&gt; + edges from 7501671 (vertex names):</span>
<span class="co">#&gt;  [1] 1 --3  1 --6  1 --10 1 --12 1 --13 1 --18 1 --21 1 --26 1 --32 1 --42</span>
<span class="co">#&gt; [11] 1 --43 2 --3  2 --8  2 --12 2 --13 2 --20 2 --24 2 --37 2 --40 3 --12</span>
<span class="co">#&gt; [21] 3 --13 3 --20 3 --26 3 --31 3 --37 3 --43 3 --46 4 --5  4 --9  4 --12</span>
<span class="co">#&gt; [31] 4 --20 4 --22 4 --27 4 --36 4 --39 5 --12 5 --24 5 --27 5 --48 6 --13</span>
<span class="co">#&gt; [41] 6 --18 6 --26 6 --31 6 --32 6 --34 6 --43 7 --16 7 --17 7 --20 7 --21</span>
<span class="co">#&gt; [51] 7 --26 7 --28 7 --34 7 --39 7 --44 7 --48 7 --49 8 --12 8 --17 8 --32</span>
<span class="co">#&gt; [61] 8 --37 8 --42 8 --43 9 --26 9 --27 9 --34 9 --38 9 --39 9 --46 10--13</span>
<span class="co">#&gt; [71] 10--21 10--32 10--37 11--42 11--50 12--14 12--17 12--22 12--23 12--26</span>
<span class="co">#&gt; + ... omitted several edges</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[1]][[9]]</span>
<span class="co">#&gt; IGRAPH 7dc10e3 UNW- 43 58 -- </span>
<span class="co">#&gt; + attr: name (v/c), weight (e/n)</span>
<span class="co">#&gt; + edges from 7dc10e3 (vertex names):</span>
<span class="co">#&gt;  [1] 1 --3  1 --25 1 --27 1 --36 1 --38 1 --39 2 --4  2 --10 2 --31 2 --34</span>
<span class="co">#&gt; [11] 3 --11 3 --24 3 --28 3 --38 3 --39 3 --49 4 --10 6 --21 6 --25 8 --10</span>
<span class="co">#&gt; [21] 8 --11 8 --19 8 --40 9 --10 9 --21 9 --22 9 --29 9 --34 9 --35 9 --47</span>
<span class="co">#&gt; [31] 10--11 10--19 10--23 10--26 10--47 10--48 11--28 11--38 12--35 12--45</span>
<span class="co">#&gt; [41] 14--28 14--38 19--29 22--29 22--34 22--35 26--48 27--36 28--32 28--38</span>
<span class="co">#&gt; [51] 28--49 29--34 29--35 31--32 31--34 34--35 35--45 38--47</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[1]][[10]]</span>
<span class="co">#&gt; IGRAPH 4aaf963 UNW- 39 40 -- </span>
<span class="co">#&gt; + attr: name (v/c), weight (e/n)</span>
<span class="co">#&gt; + edges from 4aaf963 (vertex names):</span>
<span class="co">#&gt;  [1] 1 --7  1 --38 2 --33 6 --13 6 --14 6 --35 6 --38 6 --40 6 --47 8 --40</span>
<span class="co">#&gt; [11] 12--26 12--36 12--50 13--35 14--17 14--25 14--32 14--42 14--47 14--48</span>
<span class="co">#&gt; [21] 18--23 19--29 23--48 25--32 25--42 25--48 26--29 26--43 26--48 28--41</span>
<span class="co">#&gt; [31] 29--36 29--43 31--50 32--42 32--48 35--37 38--39 38--40 42--48 43--49</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[1]][[11]]</span>
<span class="co">#&gt; IGRAPH 00eb302 UNW- 39 32 -- </span>
<span class="co">#&gt; + attr: name (v/c), weight (e/n)</span>
<span class="co">#&gt; + edges from 00eb302 (vertex names):</span>
<span class="co">#&gt;  [1] 1 --9  1 --33 1 --47 3 --8  3 --17 3 --28 3 --50 4 --11 4 --18 6 --13</span>
<span class="co">#&gt; [11] 6 --35 8 --12 8 --17 9 --47 11--18 12--26 12--50 13--35 15--22 15--43</span>
<span class="co">#&gt; [21] 21--35 21--41 22--43 26--29 26--43 28--47 29--36 29--40 29--43 31--46</span>
<span class="co">#&gt; [31] 35--41 38--39</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt; IGRAPH 2971146 UNW- 50 607 -- </span>
<span class="co">#&gt; + attr: name (v/c), weight (e/n)</span>
<span class="co">#&gt; + edges from 2971146 (vertex names):</span>
<span class="co">#&gt;   [1] 1--2  1--3  1--6  1--7  1--9  1--10 1--11 1--12 1--13 1--14 1--18 1--21</span>
<span class="co">#&gt;  [13] 1--24 1--25 1--26 1--27 1--28 1--30 1--32 1--33 1--34 1--35 1--36 1--38</span>
<span class="co">#&gt;  [25] 1--39 1--42 1--43 1--44 1--45 1--47 1--49 1--50 2--3  2--4  2--8  2--10</span>
<span class="co">#&gt;  [37] 2--11 2--12 2--13 2--18 2--20 2--24 2--27 2--31 2--33 2--34 2--35 2--36</span>
<span class="co">#&gt;  [49] 2--37 2--38 2--39 2--40 2--41 2--42 2--48 3--4  3--5  3--8  3--11 3--12</span>
<span class="co">#&gt;  [61] 3--13 3--15 3--17 3--19 3--20 3--24 3--26 3--27 3--28 3--31 3--32 3--36</span>
<span class="co">#&gt;  [73] 3--37 3--38 3--39 3--40 3--41 3--43 3--44 3--46 3--49 3--50 4--5  4--6 </span>
<span class="co">#&gt;  [85] 4--9  4--10 4--11 4--12 4--18 4--20 4--22 4--23 4--25 4--27 4--28 4--31</span>
<span class="co">#&gt; + ... omitted several edges</span>
<span class="co">#Note that cc_nets[[1]] is a list of the networks for each network window and cc_nets[[2]] is the overall (aggregated) network</span>

<span class="co">##Now we can plot the networks produced</span>
<span class="co">#Setting fixed_locs to TRUE means nodes have the same coordinates in each plot</span>
<span class="co">#Setting dynamic to FALSE and rows to 2 means we produce a multipanelled figure with 2 rows</span>
<span class="co">#We can use additional arguments from the plot.igraph function. Here we suppress node labels as an example.</span>
<span class="kw pkg">CMRnet</span><span class="kw ns">::</span><span class="fu"><a href="../reference/cmrSocPlot.html">cmrSocPlot</a></span>(<span class="kw">nets</span><span class="kw">=</span><span class="no">cc_nets</span>,<span class="kw">fixed_locs</span><span class="kw">=</span><span class="fl">TRUE</span>,<span class="kw">dynamic</span><span class="kw">=</span><span class="fl">FALSE</span>,<span class="kw">rows</span><span class="kw">=</span><span class="fl">4</span>,<span class="kw">vertex.label</span><span class="kw">=</span><span class="fl">NA</span>)</pre></body></html></div>
<p><img src="CMRnet_files/figure-html/igraph_conv_and_plotting_soc-1.png" width="768"></p>
<hr>
<p>And here is an example where plot a movement network.</p>
<div class="sourceCode" id="cb13"><html><body><pre class="r">
<span class="co">##Convert social networks into a list of igraph networks</span>
<span class="no">m_nets</span><span class="kw">&lt;-</span><span class="kw pkg">CMRnet</span><span class="kw ns">::</span><span class="fu"><a href="../reference/cmr_igraph.html">cmr_igraph</a></span>(<span class="no">movenetdat_hi</span>,<span class="kw">type</span><span class="kw">=</span><span class="st">"movement"</span>)

<span class="co">##Now we can plot the networks produced</span>
<span class="co">#Setting fixed_locs to TRUE means nodes have the same coordinates in each plot</span>
<span class="co">#Setting dynamic to FALSE and rows to 2 means we produce a multipanelled figure with 2 rows</span>
<span class="co">#We can use additional arguments from the plot.igraph function. Here we suppress node labels as an example.</span>
<span class="kw pkg">CMRnet</span><span class="kw ns">::</span><span class="fu"><a href="../reference/cmrMovPlot.html">cmrMovPlot</a></span>(<span class="kw">nets</span><span class="kw">=</span><span class="no">m_nets</span>,<span class="kw">fixed_locs</span><span class="kw">=</span><span class="fl">TRUE</span>,<span class="kw">dynamic</span><span class="kw">=</span><span class="fl">FALSE</span>,<span class="kw">rows</span><span class="kw">=</span><span class="fl">2</span>,<span class="kw">edge.arrow.size</span><span class="kw">=</span><span class="fl">0.5</span>)</pre></body></html></div>
<p><img src="CMRnet_files/figure-html/igraph_conv_and_plotting_mov-1.png" width="768"></p>
<hr>
<hr>
<p>The cmr_igraph function can be used in much the same way for multiplex network objects, but the plotting is rather different using a 3d scatterplot to show the layers together.</p>
<div class="sourceCode" id="cb14"><html><body><pre class="r">
<span class="co">##Convert social networks into a list of igraph networks</span>
<span class="no">mm_nets</span><span class="kw">&lt;-</span><span class="kw pkg">CMRnet</span><span class="kw ns">::</span><span class="fu"><a href="../reference/cmr_igraph.html">cmr_igraph</a></span>(<span class="no">multimovenetdat</span>,<span class="kw">type</span><span class="kw">=</span><span class="st">"multiplex"</span>)

<span class="co">##Now we can plot the networks produced</span>
<span class="co">#Setting fixed_locs to TRUE means nodes have the same coordinates in each plot</span>
<span class="co">#Setting dynamic to FALSE and rows to 2 means we produce a multipanelled figure with 2 rows</span>
<span class="co">#We can use additional arguments from the plot.igraph function. Here we suppress node labels as an example.</span>
<span class="kw pkg">CMRnet</span><span class="kw ns">::</span><span class="fu"><a href="../reference/cmrMultiplexPlot.html">cmrMultiplexPlot</a></span>(<span class="kw">nets</span><span class="kw">=</span><span class="no">mm_nets</span>,<span class="kw">fixed_locs</span><span class="kw">=</span><span class="fl">TRUE</span>,<span class="kw">dynamic</span><span class="kw">=</span><span class="fl">FALSE</span>,<span class="kw">rows</span><span class="kw">=</span><span class="fl">2</span>,<span class="kw">layer_colours</span><span class="kw">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span>(<span class="st">"dodgerblue"</span>,<span class="st">"firebrick"</span>))</pre></body></html></div>
<p><img src="CMRnet_files/figure-html/igraph_conv_and_plotting_multi-1.png" width="768"></p>
<p>Please note that the functionality for plotting multiplex networks in this way is rather limited and intended to provide basic visualisations. If more sophisticated plots are required then the function can be adjusted by the user to suit their preferences</p>
<hr>
<hr>
<hr>
<p>We now demonstrate how CMRnet can be used to conduct premutations of networks generated using the package. These permutations can be used for statistical inference.</p>
<hr>
</div>
<div id="permutation-approaches-in-cmrnet" class="section level4">
<h4 class="hasAnchor">
<a href="#permutation-approaches-in-cmrnet" class="anchor"></a>3. Permutation approaches in CMRnet</h4>
<hr>
<p>Two broad types of permutations are possible within CMRnet.</p>
<hr>
<ol style="list-style-type: decimal">
<li>Post-network permutations are node swaps that result in different node IDs being shuffled around the network. These permutations break the correlation between particular node traits and network properties and so are excellent for testing hypotheses focussed on the association between particular traits and social network measures. For example, if a reasearcher hypothesises that females have higher degree (more connections) in a network than males, then post-network permutations randomise the network with respect to this relationship and so provide an excellent reference model to test whether it is different to that expected by chance.</li>
</ol>
<hr>
<ol start="2" style="list-style-type: decimal">
<li>Pre-network or datastream permutations shuffle the raw capture data, swapping the identity of individual captured (for co-capture/social networks) or the location of the capture (for movement networks) between different capture events. These types of permutations provide an excellent tool for assessing whether a network is different to random within the particular set of constraints imposed by the permutation, and can control for sampling effects (e.g. some individuals being captured more often or more captures occurring at particular locations).</li>
</ol>
<hr>
<hr>
<p>Post-network permutations can be conducted in two ways in CMRnet. Unrestricted swaps are conducted using the function cmrNodeswap() which is demonstrated here. Swaps can also be restricted to only occur between particular pairs of individuals (e.g. those captured at the same locations) and are demonstrated in one of the empirical case studies.</p>
<div class="sourceCode" id="cb15"><html><body><pre class="r">
<span class="co">##Unrestricted node swaps</span>
<span class="co">#Note that you can set the desired number of permuted networks and need to indicate whether the network is multiplex or not</span>
<span class="no">ns_nets</span> <span class="kw">&lt;-</span> <span class="kw pkg">CMRnet</span><span class="kw ns">::</span><span class="fu"><a href="../reference/cmrNodeswap.html">cmrNodeswap</a></span>(<span class="no">netdat</span>, <span class="kw">n.rand</span> <span class="kw">=</span> <span class="fl">1000</span>, <span class="kw">multi</span> <span class="kw">=</span> <span class="fl">FALSE</span>)

<span class="co">#Show dimensions of output object</span>
<span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(<span class="no">ns_nets</span>,<span class="no">dim</span>)
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; [1]  180  180 1000</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt; [1]  180  180 1000</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[3]]</span>
<span class="co">#&gt; [1]  180  180 1000</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[4]]</span>
<span class="co">#&gt; [1]  180  180 1000</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[5]]</span>
<span class="co">#&gt; [1]  180  180 1000</span></pre></body></html></div>
<p>The output of the post-network permutations is a list, where each element of the list corresponds to a particular network window and contains an array of the permuted networks for that window. For multiplex networks this list is nested (see manual pages).</p>
<hr>
<hr>
<p>Pre-network permutations have separate functions for co-capture (social) networks and movement networks and we demonstrate both below. They differ through the DatastreamPermSoc() function swapping individual identities between capture events and the DatastreamPermSpat() function swapping locations instead</p>
<hr>
<p>First co-capture networks</p>
<div class="sourceCode" id="cb16"><html><body><pre class="r">
<span class="co">## Reset parameters for co-capture network generation</span>
<span class="no">mindate</span> <span class="kw">&lt;-</span> <span class="st">"2010-01-01"</span>
<span class="no">maxdate</span> <span class="kw">&lt;-</span> <span class="st">"2015-01-01"</span>
<span class="no">intwindow</span> <span class="kw">&lt;-</span> <span class="fl">60</span>
<span class="no">netwindow</span> <span class="kw">&lt;-</span> <span class="fl">12</span>
<span class="no">overlap</span> <span class="kw">&lt;-</span> <span class="fl">0</span>
<span class="no">spacewindow</span> <span class="kw">&lt;-</span> <span class="fl">0</span>

<span class="co">## Set new parameter for the permutations</span>
<span class="co">#Whether swaps should be constrained to occur only between capture events at the same time</span>
<span class="no">same.time</span> <span class="kw">=</span> <span class="fl">FALSE</span>
<span class="co">#An upper limit for the number of days between capture events for swaps to be allowed</span>
<span class="no">time.restrict</span> <span class="kw">=</span> <span class="fl">6</span>
<span class="co">#Whether swaps should be constrained to occur only between capture events at the same location</span>
<span class="no">same.spat</span> <span class="kw">=</span> <span class="fl">FALSE</span>
<span class="co">#Whether swaps should be constrained to occur within a threshold distance (setting to "n" means this argument is ignored)</span>
<span class="no">spat.restrict</span> <span class="kw">=</span> <span class="st">"n"</span>
<span class="co">#The length of the burn-in period before networks are saved</span>
<span class="no">n.burnin</span> <span class="kw">=</span> <span class="fl">10</span>
<span class="co">#The number  of swaps between each saved result</span>
<span class="no">n.swaps</span> <span class="kw">=</span> <span class="fl">5</span>
<span class="co">#The number of permuted datasets to be saved. Not we have set this to be small so that the function runs quickly (normally it would be 1000, 10,000 etc.)</span>
<span class="no">n.rand</span> <span class="kw">=</span> <span class="fl">2</span>
<span class="co">#The number of days around a capture event that an individual can't be swapped into (see manual pages)</span>
<span class="no">buffer</span> <span class="kw">=</span> <span class="fl">0</span>

<span class="co">## Run permutations</span>
<span class="co">#Note we have set iter=FALSE here. iter=TRUE allows these swaps to be conducted one at a time to help with memory issues</span>
<span class="no">Rs</span> <span class="kw">&lt;-</span> <span class="kw pkg">CMRnet</span><span class="kw ns">::</span><span class="fu"><a href="../reference/DatastreamPermSoc.html">DatastreamPermSoc</a></span>(
    <span class="kw">data</span> <span class="kw">=</span> <span class="no">cmrData</span>,
    <span class="no">intwindow</span>,
    <span class="no">mindate</span>,
    <span class="no">maxdate</span>,
    <span class="no">netwindow</span>,
    <span class="no">overlap</span>,
    <span class="no">spacewindow</span>,
    <span class="no">same.time</span>,
    <span class="no">time.restrict</span>,
    <span class="no">same.spat</span>,
    <span class="no">spat.restrict</span>,
    <span class="no">n.swaps</span>,
    <span class="no">n.rand</span>,
    <span class="kw">burnin</span> <span class="kw">=</span> <span class="fl">TRUE</span>,
    <span class="no">n.burnin</span>,
    <span class="kw">iter</span> <span class="kw">=</span> <span class="fl">FALSE</span>,
    <span class="kw">buffer</span><span class="kw">=</span><span class="no">buffer</span>
  )
<span class="co">#&gt; [1] "End of final network window aligns with end of study"</span>

<span class="co">#The first element of the output is a list where each element corresponds to a network window and contains an array with the permuted networks.</span>
<span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(<span class="no">Rs</span><span class="kw">[[</span><span class="fl">1</span>]],<span class="no">dim</span>)
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; [1] 180 180   2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt; [1] 180 180   2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[3]]</span>
<span class="co">#&gt; [1] 180 180   2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[4]]</span>
<span class="co">#&gt; [1] 180 180   2</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[5]]</span>
<span class="co">#&gt; [1] 180 180   2</span>

<span class="co">#The second element is the new node.exist indicator</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span>(<span class="no">Rs</span><span class="kw">[[</span><span class="fl">2</span>]])
<span class="co">#&gt; [1] 180   6</span>

<span class="co">##If instead we set iter=TRUE</span>
<span class="co">#(not we have changed some of the other arguments too)</span>
<span class="no">Rs2</span> <span class="kw">&lt;-</span> <span class="kw pkg">CMRnet</span><span class="kw ns">::</span><span class="fu"><a href="../reference/DatastreamPermSoc.html">DatastreamPermSoc</a></span>(
    <span class="kw">data</span> <span class="kw">=</span> <span class="no">cmrData</span>,
    <span class="no">intwindow</span>,
    <span class="no">mindate</span>,
    <span class="no">maxdate</span>,
    <span class="no">netwindow</span>,
    <span class="no">overlap</span>,
    <span class="no">spacewindow</span>,
    <span class="no">same.time</span>,
    <span class="no">time.restrict</span>,
    <span class="no">same.spat</span>,
    <span class="no">spat.restrict</span>,
    <span class="kw">n.swaps</span><span class="kw">=</span><span class="fl">10</span>,
    <span class="kw">n.rand</span><span class="kw">=</span><span class="fl">1</span>,
    <span class="kw">burnin</span> <span class="kw">=</span> <span class="fl">FALSE</span>,
    <span class="kw">n.burnin</span><span class="kw">=</span><span class="fl">0</span>,
    <span class="kw">iter</span> <span class="kw">=</span> <span class="fl">TRUE</span>,
    <span class="kw">buffer</span><span class="kw">=</span><span class="no">buffer</span>
  )
<span class="co">#&gt; [1] "End of final network window aligns with end of study"</span>

<span class="co">#Instead, Rs2[[1]] is the new dataframe after the swaps, Rs2[[2]] are the networks and Rs2[[3]] the new node.exist</span>
<span class="fu"><a href="https://rdrr.io/r/base/dim.html">dim</a></span>(<span class="no">Rs2</span><span class="kw">[[</span><span class="fl">1</span>]])
<span class="co">#&gt; [1] 1230    5</span></pre></body></html></div>
<hr>
<p>Now movement networks</p>
<div class="sourceCode" id="cb17"><html><body><pre class="r">

<span class="co">## Reset parameters for co-capture network generation</span>
<span class="no">mindate</span> <span class="kw">&lt;-</span> <span class="st">"2010-01-01"</span>
<span class="no">maxdate</span> <span class="kw">&lt;-</span> <span class="st">"2015-01-01"</span>
<span class="no">intwindow</span> <span class="kw">&lt;-</span> <span class="fl">60</span>
<span class="no">netwindow</span> <span class="kw">&lt;-</span> <span class="fl">12</span>
<span class="no">overlap</span> <span class="kw">&lt;-</span> <span class="fl">0</span>

<span class="no">same.time</span><span class="kw">=</span><span class="fl">FALSE</span>
<span class="no">time.restrict</span><span class="kw">=</span><span class="fl">6</span>
<span class="no">spat.restrict</span><span class="kw">=</span><span class="st">"n"</span>
<span class="co">#Whether to restrict swaps by the identity of the individual captured</span>
<span class="no">same.id</span><span class="kw">=</span><span class="fl">FALSE</span>
<span class="no">n.swaps</span><span class="kw">=</span><span class="fl">10</span>
<span class="no">n.rand</span><span class="kw">=</span><span class="fl">100</span>
<span class="no">n.burnin</span><span class="kw">=</span><span class="fl">100</span>
<span class="no">warn.thresh</span><span class="kw">=</span><span class="fl">10000</span>

<span class="no">mRs</span> <span class="kw">&lt;-</span> <span class="kw pkg">CMRnet</span><span class="kw ns">::</span><span class="fu"><a href="../reference/DatastreamPermSpat.html">DatastreamPermSpat</a></span>(
  <span class="kw">data</span> <span class="kw">=</span> <span class="no">cmrData</span>,
  <span class="kw">intwindow</span><span class="kw">=</span><span class="no">intwindow</span>,
  <span class="kw">mindate</span><span class="kw">=</span><span class="no">mindate</span>,
  <span class="kw">maxdate</span><span class="kw">=</span><span class="no">maxdate</span>,
  <span class="kw">netwindow</span><span class="kw">=</span><span class="no">netwindow</span>,
  <span class="kw">overlap</span><span class="kw">=</span><span class="no">overlap</span>,
  <span class="kw">nextonly</span> <span class="kw">=</span> <span class="fl">TRUE</span>,
  <span class="kw">same.time</span><span class="kw">=</span><span class="no">same.time</span>,
  <span class="kw">time.restrict</span><span class="kw">=</span><span class="no">time.restrict</span>,
  <span class="kw">spat.restrict</span><span class="kw">=</span><span class="no">spat.restrict</span>,
  <span class="kw">same.id</span><span class="kw">=</span><span class="no">same.id</span>,
  <span class="kw">n.swaps</span><span class="kw">=</span><span class="no">n.swaps</span>,
  <span class="kw">n.rand</span><span class="kw">=</span><span class="no">n.rand</span>,
  <span class="kw">burnin</span> <span class="kw">=</span> <span class="fl">TRUE</span>,
  <span class="kw">n.burnin</span><span class="kw">=</span><span class="no">n.burnin</span>,
  <span class="kw">warn.thresh</span><span class="kw">=</span><span class="no">warn.thresh</span>,
  <span class="kw">iter</span> <span class="kw">=</span> <span class="fl">FALSE</span>
)
<span class="co">#&gt; [1] "End of final network window aligns with end of study"</span>

<span class="co">#Demonstrate that the randomised networks have been saved correctly</span>
<span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span>(<span class="no">mRs</span><span class="kw">[[</span><span class="fl">1</span>]],<span class="no">dim</span>)
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; [1]  20  20 100</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt; [1]  20  20 100</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[3]]</span>
<span class="co">#&gt; [1]  20  20 100</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[4]]</span>
<span class="co">#&gt; [1]  20  20 100</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[5]]</span>
<span class="co">#&gt; [1]  20  20 100</span></pre></body></html></div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Matthew Silk, Daniel Padfield.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
